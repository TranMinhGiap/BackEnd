extends ../../layouts/default.pug

block main
  if(role.permissions.includes("products_view"))
    if (product.title)
      h1(class="mb-4") #{product.title}

    if (product.price)
      div(class="mb-4") Giá: 
        b #{product.price}$

    if (product.discountPercentage)
      div(class="mb-4") Giảm giá: 
        b #{product.discountPercentage}%

    if (product.stock)
      div(class="mb-4") Còn lại: 
        b #{product.stock}

    if (product.thumbnail)
      div(class="mb-4")
        img(src=product.thumbnail style="width:100px")

    if (product.status)
      div(class="mb-4")
        span Trang thái: 
        if product.status == "active"
          span.badge.badge-success Hoạt động
        else
          span.badge.badge-danger Không hoạt động

    div(class="mb-4") Người tạo: 
      b #{product.userName || "Quản trị viên"}
    div(class="mb-4") Thời gian tạo: 
      b #{product.date ? product.date.toLocaleString("vi-VN") : "--/--/----"}
    td 
      if product.updatedBy && product.updatedBy.length > 0
        - const lastUserUpdate = product.updatedBy[product.updatedBy.length - 1];
        div(class="mb-4") Người chỉnh sửa: 
          b(class="badge badge-primary") #{lastUserUpdate.userName}
        div(class="mb-4") Thời gian chỉnh sửa: 
          b #{lastUserUpdate.updatedAt.toLocaleString("vi-VN")}
      else 
        span(class="badge badge-info mb-4") Chưa cập nhật
    if (product.position)
      div(class="mb-4") Vị trí: 
        b #{product.position}

    if (product.description)
      div(class="mb-4") !{product.description}

    if(role.permissions.includes("products_edit"))
      a(
        href=`${prefixAdmin}/products/edit/${product.id}`
        class="btn btn-outline-warning"
      ) Chỉnh sửa

    script(src="/Admin/js/product.js") 
  else
    span(
      class="badge badge-danger text-center"
    ) Không có quyền truy cập! Liên hệ với admin để hỗ trợ.